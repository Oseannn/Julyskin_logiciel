(()=>{var e={};e.id=95,e.ids=[95],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8425:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>x,tree:()=>d}),s(2923),s(2029),s(5866);var t=s(3191),i=s(8716),n=s(7922),a=s.n(n),o=s(5231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(r,c);let d=["",{children:["dashboard",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2923)),"/Users/mouss/Desktop/new/frontend/src/app/dashboard/products/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/mouss/Desktop/new/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/mouss/Desktop/new/frontend/src/app/dashboard/products/page.tsx"],u="/dashboard/products/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/products/page",pathname:"/dashboard/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3688:(e,r,s)=>{Promise.resolve().then(s.bind(s,1833))},1833:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>j});var t=s(326),i=s(7577),n=s(5297),a=s(1664),o=s(9752),c=s(3819),d=s(4118),l=s(1190),u=s(4794),p=s(8443),x=s(3855),g=s(8705),m=s(4389),h=s(8069);function j(){let[e,r]=(0,i.useState)([]),[s,j]=(0,i.useState)([]),[v,f]=(0,i.useState)(!0),[b,y]=(0,i.useState)(!1),[N,P]=(0,i.useState)(null),[k,q]=(0,i.useState)({name:"",description:"",sellingPrice:"",stock:"",categoryId:"",isActive:!0}),w=()=>{Promise.all([h.Z.get("/products"),h.Z.get("/categories")]).then(([e,s])=>{r(e.data),j(s.data)}).finally(()=>f(!1))},A=e=>{if(!e&&0===s.length){alert("Veuillez d'abord cr\xe9er au moins une cat\xe9gorie");return}e?(P(e),q({name:e.name,description:e.description||"",sellingPrice:e.sellingPrice,stock:e.stock,categoryId:e.categoryId,isActive:e.isActive})):(P(null),q({name:"",description:"",sellingPrice:"",stock:"0",categoryId:s.length>0?s[0].id:"",isActive:!0})),y(!0)},C=()=>{y(!1),P(null)},_=async e=>{if(e.preventDefault(),!k.categoryId){alert("Veuillez s\xe9lectionner une cat\xe9gorie");return}if(!k.name.trim()){alert("Veuillez entrer un nom de produit");return}try{let e={name:k.name.trim(),description:k.description.trim()||void 0,sellingPrice:parseInt(k.sellingPrice),stock:parseInt(k.stock),categoryId:k.categoryId,isActive:k.isActive};N?await h.Z.put(`/products/${N.id}`,e):await h.Z.post("/products",e),w(),C()}catch(e){alert(e.response?.data?.message||e.message||"Erreur lors de l'enregistrement"),console.error("Erreur cr\xe9ation produit:",e.response?.data||e)}};return v?t.jsx(n.Z,{children:t.jsx("div",{className:"text-sm text-muted-foreground",children:"Chargement..."})}):(0,t.jsxs)(n.Z,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Produits"}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:[e.length," produits au total"]})]}),(0,t.jsxs)(a.z,{onClick:()=>A(),className:"w-full sm:w-auto",children:[t.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Ajouter un produit"]})]}),t.jsx(o.Zb,{children:(0,t.jsxs)(c.iA,{children:[t.jsx(c.xD,{children:(0,t.jsxs)(c.SC,{children:[t.jsx(c.ss,{children:"Nom"}),t.jsx(c.ss,{children:"Cat\xe9gorie"}),t.jsx(c.ss,{children:"Prix de vente"}),t.jsx(c.ss,{children:"Stock"}),t.jsx(c.ss,{children:"Statut"}),t.jsx(c.ss,{className:"text-right",children:"Actions"})]})}),t.jsx(c.RM,{children:0===e.length?t.jsx(c.SC,{children:(0,t.jsxs)(c.pj,{colSpan:6,className:"text-center py-8",children:[t.jsx(g.Z,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-2"}),t.jsx("p",{className:"text-muted-foreground",children:"Aucun produit"})]})}):e.map(e=>(0,t.jsxs)(c.SC,{children:[t.jsx(c.pj,{className:"font-medium",children:e.name}),t.jsx(c.pj,{className:"text-muted-foreground",children:e.category?.name||"-"}),(0,t.jsxs)(c.pj,{className:"whitespace-nowrap",children:[e.sellingPrice," FCFA"]}),t.jsx(c.pj,{children:t.jsx("span",{className:e.stock<10?"text-destructive font-medium":"",children:e.stock})}),t.jsx(c.pj,{children:e.isActive?t.jsx(p.C,{variant:"success",children:"Actif"}):t.jsx(p.C,{variant:"destructive",children:"Inactif"})}),t.jsx(c.pj,{className:"text-right",children:t.jsx(a.z,{variant:"ghost",size:"sm",onClick:()=>A(e),children:t.jsx(m.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]}),t.jsx(d.Vq,{open:b,onOpenChange:y,children:(0,t.jsxs)(d.cZ,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(d.fK,{children:[t.jsx(d.$N,{children:N?"Modifier le produit":"Nouveau produit"}),t.jsx(d.Be,{children:N?"Modifiez les informations du produit":"Ajoutez un nouveau produit \xe0 votre inventaire"})]}),(0,t.jsxs)("form",{onSubmit:_,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(u._,{htmlFor:"name",children:"Nom du produit"}),t.jsx(l.I,{id:"name",value:k.name,onChange:e=>q({...k,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(u._,{htmlFor:"description",children:"Description"}),t.jsx(l.I,{id:"description",value:k.description,onChange:e=>q({...k,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(u._,{htmlFor:"categoryId",children:"Cat\xe9gorie"}),(0,t.jsxs)("select",{id:"categoryId",value:k.categoryId,onChange:e=>q({...k,categoryId:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0,children:[t.jsx("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),s.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(u._,{htmlFor:"sellingPrice",children:"Prix de vente (FCFA)"}),t.jsx(l.I,{id:"sellingPrice",type:"number",step:"1",value:k.sellingPrice,onChange:e=>q({...k,sellingPrice:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(u._,{htmlFor:"stock",children:"Stock"}),t.jsx(l.I,{id:"stock",type:"number",value:k.stock,onChange:e=>q({...k,stock:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{id:"isActive",type:"checkbox",checked:k.isActive,onChange:e=>q({...k,isActive:e.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),t.jsx(u._,{htmlFor:"isActive",className:"font-normal",children:"Produit actif"})]})]}),(0,t.jsxs)(d.cN,{children:[t.jsx(a.z,{type:"button",variant:"outline",onClick:C,children:"Annuler"}),t.jsx(a.z,{type:"submit",children:N?"Modifier":"Cr\xe9er"})]})]})]})})]})}},8443:(e,r,s)=>{"use strict";s.d(r,{C:()=>o});var t=s(326);s(7577);var i=s(9360),n=s(1223);let a=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,...s}){return t.jsx("div",{className:(0,n.cn)(a({variant:r}),e),...s})}},2923:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>a,__esModule:()=>n,default:()=>o});var t=s(8570);let i=(0,t.createProxy)(String.raw`/Users/mouss/Desktop/new/frontend/src/app/dashboard/products/page.tsx`),{__esModule:n,$$typeof:a}=i;i.default;let o=(0,t.createProxy)(String.raw`/Users/mouss/Desktop/new/frontend/src/app/dashboard/products/page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[819,284,530,806,428],()=>s(8425));module.exports=t})();