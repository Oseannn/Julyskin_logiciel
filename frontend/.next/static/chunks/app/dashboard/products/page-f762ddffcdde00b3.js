(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{6295:function(e,r,s){Promise.resolve().then(s.bind(s,2462))},2462:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return j}});var t=s(7437),i=s(2265),n=s(1828),c=s(9733),a=s(8185),l=s(7304),d=s(4662),o=s(7209),u=s(402),x=s(9055),g=s(2513),m=s(7524),h=s(8422),p=s(2800);function j(){let[e,r]=(0,i.useState)([]),[s,j]=(0,i.useState)([]),[v,f]=(0,i.useState)(!0),[b,N]=(0,i.useState)(!1),[y,k]=(0,i.useState)(null),[C,A]=(0,i.useState)({name:"",description:"",sellingPrice:"",stock:"",categoryId:"",isActive:!0}),w=()=>{Promise.all([p.Z.get("/products"),p.Z.get("/categories")]).then(e=>{let[s,t]=e;r(s.data),j(t.data)}).finally(()=>f(!1))};(0,i.useEffect)(()=>{w()},[]);let I=e=>{if(!e&&0===s.length){alert("Veuillez d'abord cr\xe9er au moins une cat\xe9gorie");return}e?(k(e),A({name:e.name,description:e.description||"",sellingPrice:e.sellingPrice,stock:e.stock,categoryId:e.categoryId,isActive:e.isActive})):(k(null),A({name:"",description:"",sellingPrice:"",stock:"0",categoryId:s.length>0?s[0].id:"",isActive:!0})),N(!0)},P=()=>{N(!1),k(null)},S=async e=>{if(e.preventDefault(),!C.categoryId){alert("Veuillez s\xe9lectionner une cat\xe9gorie");return}if(!C.name.trim()){alert("Veuillez entrer un nom de produit");return}try{let e={name:C.name.trim(),description:C.description.trim()||void 0,sellingPrice:parseInt(C.sellingPrice),stock:parseInt(C.stock),categoryId:C.categoryId,isActive:C.isActive};y?await p.Z.put("/products/".concat(y.id),e):await p.Z.post("/products",e),w(),P()}catch(e){var r,s,t;alert((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||e.message||"Erreur lors de l'enregistrement"),console.error("Erreur cr\xe9ation produit:",(null===(t=e.response)||void 0===t?void 0:t.data)||e)}};return v?(0,t.jsx)(n.Z,{children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Chargement..."})}):(0,t.jsxs)(n.Z,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Produits"}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:[e.length," produits au total"]})]}),(0,t.jsxs)(c.z,{onClick:()=>I(),className:"w-full sm:w-auto",children:[(0,t.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Ajouter un produit"]})]}),(0,t.jsx)(a.Zb,{children:(0,t.jsxs)(l.iA,{children:[(0,t.jsx)(l.xD,{children:(0,t.jsxs)(l.SC,{children:[(0,t.jsx)(l.ss,{children:"Nom"}),(0,t.jsx)(l.ss,{children:"Cat\xe9gorie"}),(0,t.jsx)(l.ss,{children:"Prix de vente"}),(0,t.jsx)(l.ss,{children:"Stock"}),(0,t.jsx)(l.ss,{children:"Statut"}),(0,t.jsx)(l.ss,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(l.RM,{children:0===e.length?(0,t.jsx)(l.SC,{children:(0,t.jsxs)(l.pj,{colSpan:6,className:"text-center py-8",children:[(0,t.jsx)(m.Z,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Aucun produit"})]})}):e.map(e=>{var r;return(0,t.jsxs)(l.SC,{children:[(0,t.jsx)(l.pj,{className:"font-medium",children:e.name}),(0,t.jsx)(l.pj,{className:"text-muted-foreground",children:(null===(r=e.category)||void 0===r?void 0:r.name)||"-"}),(0,t.jsxs)(l.pj,{className:"whitespace-nowrap",children:[e.sellingPrice," FCFA"]}),(0,t.jsx)(l.pj,{children:(0,t.jsx)("span",{className:e.stock<10?"text-destructive font-medium":"",children:e.stock})}),(0,t.jsx)(l.pj,{children:e.isActive?(0,t.jsx)(x.C,{variant:"success",children:"Actif"}):(0,t.jsx)(x.C,{variant:"destructive",children:"Inactif"})}),(0,t.jsx)(l.pj,{className:"text-right",children:(0,t.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>I(e),children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})})})]},e.id)})})]})})]}),(0,t.jsx)(d.Vq,{open:b,onOpenChange:N,children:(0,t.jsxs)(d.cZ,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(d.fK,{children:[(0,t.jsx)(d.$N,{children:y?"Modifier le produit":"Nouveau produit"}),(0,t.jsx)(d.Be,{children:y?"Modifiez les informations du produit":"Ajoutez un nouveau produit \xe0 votre inventaire"})]}),(0,t.jsxs)("form",{onSubmit:S,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"name",children:"Nom du produit"}),(0,t.jsx)(o.I,{id:"name",value:C.name,onChange:e=>A({...C,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"description",children:"Description"}),(0,t.jsx)(o.I,{id:"description",value:C.description,onChange:e=>A({...C,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"categoryId",children:"Cat\xe9gorie"}),(0,t.jsxs)("select",{id:"categoryId",value:C.categoryId,onChange:e=>A({...C,categoryId:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0,children:[(0,t.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"sellingPrice",children:"Prix de vente (FCFA)"}),(0,t.jsx)(o.I,{id:"sellingPrice",type:"number",step:"1",value:C.sellingPrice,onChange:e=>A({...C,sellingPrice:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"stock",children:"Stock"}),(0,t.jsx)(o.I,{id:"stock",type:"number",value:C.stock,onChange:e=>A({...C,stock:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{id:"isActive",type:"checkbox",checked:C.isActive,onChange:e=>A({...C,isActive:e.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),(0,t.jsx)(u._,{htmlFor:"isActive",className:"font-normal",children:"Produit actif"})]})]}),(0,t.jsxs)(d.cN,{children:[(0,t.jsx)(c.z,{type:"button",variant:"outline",onClick:P,children:"Annuler"}),(0,t.jsx)(c.z,{type:"submit",children:y?"Modifier":"Cr\xe9er"})]})]})]})})]})}},9055:function(e,r,s){"use strict";s.d(r,{C:function(){return a}});var t=s(7437);s(2265);var i=s(3027),n=s(9354);let c=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function a(e){let{className:r,variant:s,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)(c({variant:s}),r),...i})}}},function(e){e.O(0,[100,734,714,40,971,23,744],function(){return e(e.s=6295)}),_N_E=e.O()}]);