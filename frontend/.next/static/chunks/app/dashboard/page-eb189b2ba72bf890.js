(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{8928:function(e,t,s){Promise.resolve().then(s.bind(s,1107))},1107:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(7437),n=s(2265),a=s(1828),l=s(8185),i=s(9733),d=s(7304),o=s(9055),c=s(8204);let u=(0,c.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var m=s(7524);let x=(0,c.Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var f=s(1240);let h=(0,c.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var p=s(2800);function j(){var e,t,s,c,j;let[v,b]=(0,n.useState)(null),[g,N]=(0,n.useState)("month"),[y,w]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{p.Z.get("/stats/dashboard?period=".concat(g)).then(e=>b(e.data)).finally(()=>w(!1))},[g]),y)return(0,r.jsx)(a.Z,{children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Chargement..."})});let k={day:"Aujourd'hui",week:"Cette semaine",month:"Ce mois",year:"Cette ann\xe9e"};return(0,r.jsx)(a.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Tableau de bord"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-1",children:"Vue d'ensemble de votre activit\xe9"})]}),(0,r.jsx)("div",{className:"flex gap-2",children:["day","week","month","year"].map(e=>(0,r.jsxs)(i.z,{variant:g===e?"default":"outline",size:"sm",onClick:()=>N(e),children:[(0,r.jsx)(u,{className:"mr-2 h-4 w-4"}),k[e]]},e))})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ll,{className:"text-sm font-medium",children:"Produits vendus"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==v?void 0:v.productsSold)||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:k[g]})]})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ll,{className:"text-sm font-medium",children:"Chiffre d'affaires"}),(0,r.jsx)(x,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.aY,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[(null==v?void 0:v.revenue)||0," FCFA"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:k[g]})]})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ll,{className:"text-sm font-medium",children:"Clients actifs"}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==v?void 0:v.activeClients)||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:k[g]})]})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.ll,{className:"text-sm font-medium",children:"Stock faible"}),(0,r.jsx)(h,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-destructive",children:(null==v?void 0:v.lowStockCount)||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Produits \xe0 r\xe9approvisionner"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Top 3 des produits"}),(0,r.jsx)(l.SZ,{children:"Les produits les plus vendus"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:(null==v?void 0:null===(e=v.topProducts)||void 0===e?void 0:e.length)===0?(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucune vente pour le moment"}):null==v?void 0:null===(t=v.topProducts)||void 0===t?void 0:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary font-bold text-sm",children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.soldCount," vendus"]})]})]}),(0,r.jsxs)(o.C,{variant:"outline",children:[e.revenue," FCFA"]})]},e.id))})})]}),(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Top 5 des clients"}),(0,r.jsx)(l.SZ,{children:"Les meilleurs clients"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:(null==v?void 0:null===(s=v.topClients)||void 0===s?void 0:s.length)===0?(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Aucun client pour le moment"}):null==v?void 0:null===(c=v.topClients)||void 0===c?void 0:c.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary font-bold text-sm",children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium",children:[e.firstName," ",e.lastName]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.purchaseCount," achats"]})]})]}),(0,r.jsxs)(o.C,{variant:"outline",children:[e.totalSpent," FCFA"]})]},e.id))})})]})]}),(null==v?void 0:null===(j=v.lowStockProducts)||void 0===j?void 0:j.length)>0&&(0,r.jsxs)(l.Zb,{className:"border-destructive",children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(h,{className:"h-5 w-5 text-destructive"}),"Alerte stock faible"]}),(0,r.jsx)(l.SZ,{children:"Ces produits n\xe9cessitent un r\xe9approvisionnement"})]}),(0,r.jsx)(l.aY,{children:(0,r.jsxs)(d.iA,{children:[(0,r.jsx)(d.xD,{children:(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.ss,{children:"Produit"}),(0,r.jsx)(d.ss,{children:"Cat\xe9gorie"}),(0,r.jsx)(d.ss,{children:"Stock actuel"})]})}),(0,r.jsx)(d.RM,{children:v.lowStockProducts.map(e=>{var t;return(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(d.pj,{className:"text-muted-foreground",children:null===(t=e.category)||void 0===t?void 0:t.name}),(0,r.jsx)(d.pj,{children:(0,r.jsxs)(o.C,{variant:"destructive",children:[e.stock," unit\xe9s"]})})]},e.id)})})]})})]})]})})}},1828:function(e,t,s){"use strict";s.d(t,{Z:function(){return N}});var r=s(7437),n=s(2265),a=s(6463),l=s(7138),i=s(8320),d=s(2800),o=s(9733),c=s(7140),u=s(2023),m=s(7524),x=s(5912),f=s(1240),h=s(8062),p=s(4258),j=s(4697),v=s(2873),b=s(9896),g=s(9354);function N(e){let{children:t}=e,s=(0,a.useRouter)(),N=(0,a.usePathname)(),{user:y,setUser:w,logout:k}=(0,i.t)(),[C,Z]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!localStorage.getItem("accessToken")){s.push("/login");return}y||d.Z.get("/users").then(()=>{let e=localStorage.getItem("user");e&&w(JSON.parse(e))}).catch(()=>{s.push("/login")})},[y,w,s]);let S=[{href:"/dashboard",label:"Tableau de bord",icon:c.Z},{href:"/dashboard/invoices",label:"Factures",icon:u.Z},{href:"/dashboard/products",label:"Produits",icon:m.Z},{href:"/dashboard/services",label:"Services",icon:x.Z},{href:"/dashboard/clients",label:"Clients",icon:f.Z},...(null==y?void 0:y.role)==="ADMIN"?[{href:"/dashboard/users",label:"Utilisateurs",icon:h.Z}]:[],{href:"/dashboard/settings",label:"Param\xe8tres",icon:p.Z}];return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsxs)("div",{className:"md:hidden sticky top-0 z-40 flex h-16 items-center gap-4 border-b bg-background px-4",children:[(0,r.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>Z(!C),children:C?(0,r.jsx)(j.Z,{className:"h-5 w-5"}):(0,r.jsx)(v.Z,{className:"h-5 w-5"})}),(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"Julyskin"})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("aside",{className:(0,g.cn)("fixed inset-y-0 left-0 z-50 w-64 transform border-r bg-card transition-transform duration-200 ease-in-out md:relative md:translate-x-0",C?"translate-x-0":"-translate-x-full"),children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)("div",{className:"hidden md:flex h-16 items-center border-b px-6",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-primary",children:"Julyskin"})}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 p-4 overflow-y-auto",children:S.map(e=>{let t=e.icon,s=N===e.href;return(0,r.jsxs)(l.default,{href:e.href,onClick:()=>Z(!1),className:(0,g.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",s?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,r.jsx)(t,{className:"h-4 w-4"}),e.label]},e.href)})}),(0,r.jsxs)("div",{className:"border-t p-4",children:[y&&(0,r.jsxs)("div",{className:"mb-3 rounded-lg bg-muted p-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium",children:[y.firstName," ",y.lastName]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:y.email}),(0,r.jsx)("p",{className:"mt-1 text-xs font-medium text-primary",children:"ADMIN"===y.role?"Administrateur":"Vendeuse"})]}),(0,r.jsxs)(o.z,{variant:"outline",className:"w-full",onClick:()=>{k(),s.push("/login")},children:[(0,r.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"D\xe9connexion"]})]})]})}),C&&(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>Z(!1)}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"container mx-auto p-4 md:p-8",children:t})})]})]})}},9055:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(7437);s(2265);var n=s(3027),a=s(9354);let l=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)(l({variant:s}),t),...n})}},9733:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),n=s(2265),a=s(3027),l=s(9354);let i=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:a,...d}=e;return(0,r.jsx)("button",{className:(0,l.cn)(i({variant:n,size:a,className:s})),ref:t,...d})});d.displayName="Button"},8185:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return c},ll:function(){return d}});var r=s(7437),n=s(2265),a=s(9354);let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...n})});i.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});d.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...n})});o.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},7304:function(e,t,s){"use strict";s.d(t,{RM:function(){return d},SC:function(){return o},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var r=s(7437),n=s(2265),a=s(9354);let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",s),...n})})});l.displayName="Table";let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",s),...n})});i.displayName="TableHeader";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",s),...n})});d.displayName="TableBody",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...n})}).displayName="TableFooter";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...n})});o.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",s),...n})}).displayName="TableCaption"},2800:function(e,t,s){"use strict";var r=s(8472);let n=r.Z.create({baseURL:"http://localhost:4000/api"});n.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e,async e=>{var t;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=localStorage.getItem("refreshToken");if(t)try{let{data:s}=await r.Z.post("".concat("http://localhost:4000/api","/auth/refresh"),{refreshToken:t});return localStorage.setItem("accessToken",s.accessToken),e.config.headers.Authorization="Bearer ".concat(s.accessToken),n.request(e.config)}catch(e){localStorage.clear(),window.location.href="/login"}}return Promise.reject(e)}),t.Z=n},9354:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var r=s(4839),n=s(6164);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,r.W)(t))}},8320:function(e,t,s){"use strict";s.d(t,{t:function(){return r}});let r=(0,s(9099).Ue)(e=>({user:null,setUser:t=>e({user:t}),logout:()=>{localStorage.clear(),e({user:null})}}))}},function(e){e.O(0,[100,734,971,23,744],function(){return e(e.s=8928)}),_N_E=e.O()}]);