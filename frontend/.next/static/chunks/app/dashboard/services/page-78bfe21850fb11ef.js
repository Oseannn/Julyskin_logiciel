(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{5997:function(e,i,n){Promise.resolve().then(n.bind(n,7320))},7320:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return v}});var r=n(7437),s=n(2265),t=n(1828),a=n(9733),c=n(8185),l=n(7304),d=n(4662),o=n(7209),u=n(402),x=n(9055),m=n(2513),h=n(5912),g=n(8422),j=n(2800);function v(){let[e,i]=(0,s.useState)([]),[n,v]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),[b,N]=(0,s.useState)(null),[y,A]=(0,s.useState)({name:"",description:"",billingType:"FORFAIT",unitPrice:"",minDuration:"",isActive:!0}),C=()=>{j.Z.get("/services").then(e=>{i(e.data)}).finally(()=>v(!1))};(0,s.useEffect)(()=>{C()},[]);let P=e=>{e?(N(e),A({name:e.name,description:e.description||"",billingType:e.billingType,unitPrice:e.unitPrice,minDuration:e.minDuration||"",isActive:e.isActive})):(N(null),A({name:"",description:"",billingType:"FORFAIT",unitPrice:"",minDuration:"",isActive:!0})),f(!0)},F=async e=>{e.preventDefault();try{let e={...y,unitPrice:parseInt(y.unitPrice),minDuration:y.minDuration?parseInt(y.minDuration):null};b?await j.Z.put("/services/".concat(b.id),e):await j.Z.post("/services",e),C(),f(!1)}catch(e){var i,n;alert((null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)||"Erreur lors de l'enregistrement")}},D=e=>({PAR_MINUTE:"Par minute",PAR_HEURE:"Par heure",FORFAIT:"Forfait"})[e]||e;return n?(0,r.jsx)(t.Z,{children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Chargement..."})}):(0,r.jsxs)(t.Z,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Services"}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-1",children:[e.length," services au total"]})]}),(0,r.jsxs)(a.z,{onClick:()=>P(),className:"w-full sm:w-auto",children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Ajouter un service"]})]}),(0,r.jsx)(c.Zb,{children:(0,r.jsxs)(l.iA,{children:[(0,r.jsx)(l.xD,{children:(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.ss,{children:"Nom"}),(0,r.jsx)(l.ss,{children:"Type de facturation"}),(0,r.jsx)(l.ss,{children:"Prix unitaire"}),(0,r.jsx)(l.ss,{children:"Dur\xe9e min."}),(0,r.jsx)(l.ss,{children:"Statut"}),(0,r.jsx)(l.ss,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(l.RM,{children:0===e.length?(0,r.jsx)(l.SC,{children:(0,r.jsxs)(l.pj,{colSpan:6,className:"text-center py-8",children:[(0,r.jsx)(h.Z,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-2"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Aucun service"})]})}):e.map(e=>(0,r.jsxs)(l.SC,{children:[(0,r.jsx)(l.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(l.pj,{children:(0,r.jsx)(x.C,{variant:"outline",children:D(e.billingType)})}),(0,r.jsxs)(l.pj,{children:[e.unitPrice," FCFA"]}),(0,r.jsx)(l.pj,{className:"text-muted-foreground",children:e.minDuration?"".concat(e.minDuration," min"):"-"}),(0,r.jsx)(l.pj,{children:e.isActive?(0,r.jsx)(x.C,{variant:"success",children:"Actif"}):(0,r.jsx)(x.C,{variant:"destructive",children:"Inactif"})}),(0,r.jsx)(l.pj,{className:"text-right",children:(0,r.jsx)(a.z,{variant:"ghost",size:"sm",onClick:()=>P(e),children:(0,r.jsx)(g.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]}),(0,r.jsx)(d.Vq,{open:p,onOpenChange:f,children:(0,r.jsxs)(d.cZ,{className:"sm:max-w-[500px]",children:[(0,r.jsxs)(d.fK,{children:[(0,r.jsx)(d.$N,{children:b?"Modifier le service":"Nouveau service"}),(0,r.jsx)(d.Be,{children:b?"Modifiez les informations du service":"Ajoutez un nouveau service"})]}),(0,r.jsxs)("form",{onSubmit:F,children:[(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(u._,{htmlFor:"name",children:"Nom du service"}),(0,r.jsx)(o.I,{id:"name",value:y.name,onChange:e=>A({...y,name:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(u._,{htmlFor:"description",children:"Description"}),(0,r.jsx)(o.I,{id:"description",value:y.description,onChange:e=>A({...y,description:e.target.value})})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(u._,{htmlFor:"billingType",children:"Type de facturation"}),(0,r.jsxs)("select",{id:"billingType",value:y.billingType,onChange:e=>A({...y,billingType:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0,children:[(0,r.jsx)("option",{value:"FORFAIT",children:"Forfait"}),(0,r.jsx)("option",{value:"PAR_HEURE",children:"Par heure"}),(0,r.jsx)("option",{value:"PAR_MINUTE",children:"Par minute"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(u._,{htmlFor:"unitPrice",children:"Prix unitaire (FCFA)"}),(0,r.jsx)(o.I,{id:"unitPrice",type:"number",step:"1",value:y.unitPrice,onChange:e=>A({...y,unitPrice:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(u._,{htmlFor:"minDuration",children:"Dur\xe9e min. (min)"}),(0,r.jsx)(o.I,{id:"minDuration",type:"number",value:y.minDuration,onChange:e=>A({...y,minDuration:e.target.value})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{id:"isActive",type:"checkbox",checked:y.isActive,onChange:e=>A({...y,isActive:e.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),(0,r.jsx)(u._,{htmlFor:"isActive",className:"font-normal",children:"Service actif"})]})]}),(0,r.jsxs)(d.cN,{children:[(0,r.jsx)(a.z,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Annuler"}),(0,r.jsx)(a.z,{type:"submit",children:b?"Modifier":"Cr\xe9er"})]})]})]})})]})}},9055:function(e,i,n){"use strict";n.d(i,{C:function(){return c}});var r=n(7437);n(2265);var s=n(3027),t=n(9354);let a=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function c(e){let{className:i,variant:n,...s}=e;return(0,r.jsx)("div",{className:(0,t.cn)(a({variant:n}),i),...s})}}},function(e){e.O(0,[100,734,714,40,971,23,744],function(){return e(e.s=5997)}),_N_E=e.O()}]);