(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[618],{653:function(e,s,r){Promise.resolve().then(r.bind(r,5682))},5682:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return g}});var t=r(7437),i=r(2265),a=r(1828),l=r(9733),n=r(8185),d=r(7304),c=r(4662),o=r(7209),u=r(402),m=r(9055),x=r(2513),h=r(8062),j=r(8422),f=r(2800);function g(){let[e,s]=(0,i.useState)([]),[r,g]=(0,i.useState)(!0),[p,v]=(0,i.useState)(!1),[N,b]=(0,i.useState)(null),[w,y]=(0,i.useState)({email:"",password:"",firstName:"",lastName:"",role:"VENDEUSE",isActive:!0}),A=()=>{f.Z.get("/users").then(e=>{s(e.data)}).finally(()=>g(!1))};(0,i.useEffect)(()=>{A()},[]);let C=e=>{e?(b(e),y({email:e.email,password:"",firstName:e.firstName,lastName:e.lastName,role:e.role,isActive:e.isActive})):(b(null),y({email:"",password:"",firstName:"",lastName:"",role:"VENDEUSE",isActive:!0})),v(!0)},E=async e=>{e.preventDefault();try{let e={email:w.email,firstName:w.firstName,lastName:w.lastName,role:w.role,isActive:w.isActive};if(w.password&&(e.password=w.password),N)await f.Z.put("/users/".concat(N.id),e);else{if(!w.password){alert("Le mot de passe est requis pour un nouvel utilisateur");return}e.password=w.password,await f.Z.post("/users",e)}A(),v(!1)}catch(e){var s,r;alert((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Erreur lors de l'enregistrement")}};return r?(0,t.jsx)(a.Z,{children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Chargement..."})}):(0,t.jsxs)(a.Z,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Utilisateurs"}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:[e.length," utilisateurs au total"]})]}),(0,t.jsxs)(l.z,{onClick:()=>C(),className:"w-full sm:w-auto",children:[(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Ajouter un utilisateur"]})]}),(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(d.iA,{children:[(0,t.jsx)(d.xD,{children:(0,t.jsxs)(d.SC,{children:[(0,t.jsx)(d.ss,{children:"Nom"}),(0,t.jsx)(d.ss,{children:"Pr\xe9nom"}),(0,t.jsx)(d.ss,{children:"Email"}),(0,t.jsx)(d.ss,{children:"R\xf4le"}),(0,t.jsx)(d.ss,{children:"Statut"}),(0,t.jsx)(d.ss,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(d.RM,{children:0===e.length?(0,t.jsx)(d.SC,{children:(0,t.jsxs)(d.pj,{colSpan:6,className:"text-center py-8",children:[(0,t.jsx)(h.Z,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Aucun utilisateur"})]})}):e.map(e=>(0,t.jsxs)(d.SC,{children:[(0,t.jsx)(d.pj,{className:"font-medium",children:e.lastName}),(0,t.jsx)(d.pj,{children:e.firstName}),(0,t.jsx)(d.pj,{className:"text-muted-foreground",children:e.email}),(0,t.jsx)(d.pj,{children:(0,t.jsx)(m.C,{variant:"ADMIN"===e.role?"default":"secondary",children:"ADMIN"===e.role?"Administrateur":"Vendeuse"})}),(0,t.jsx)(d.pj,{children:e.isActive?(0,t.jsx)(m.C,{variant:"success",children:"Actif"}):(0,t.jsx)(m.C,{variant:"destructive",children:"Inactif"})}),(0,t.jsx)(d.pj,{className:"text-right",children:(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>C(e),children:(0,t.jsx)(j.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]}),(0,t.jsx)(c.Vq,{open:p,onOpenChange:v,children:(0,t.jsxs)(c.cZ,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(c.fK,{children:[(0,t.jsx)(c.$N,{children:N?"Modifier l'utilisateur":"Nouvel utilisateur"}),(0,t.jsx)(c.Be,{children:N?"Modifiez les informations de l'utilisateur":"Ajoutez un nouvel utilisateur"})]}),(0,t.jsxs)("form",{onSubmit:E,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"firstName",children:"Pr\xe9nom"}),(0,t.jsx)(o.I,{id:"firstName",value:w.firstName,onChange:e=>y({...w,firstName:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"lastName",children:"Nom"}),(0,t.jsx)(o.I,{id:"lastName",value:w.lastName,onChange:e=>y({...w,lastName:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"email",children:"Email"}),(0,t.jsx)(o.I,{id:"email",type:"email",value:w.email,onChange:e=>y({...w,email:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(u._,{htmlFor:"password",children:["Mot de passe ",N&&"(laisser vide pour ne pas changer)"]}),(0,t.jsx)(o.I,{id:"password",type:"password",value:w.password,onChange:e=>y({...w,password:e.target.value}),required:!N})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(u._,{htmlFor:"role",children:"R\xf4le"}),(0,t.jsxs)("select",{id:"role",value:w.role,onChange:e=>y({...w,role:e.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",required:!0,children:[(0,t.jsx)("option",{value:"VENDEUSE",children:"Vendeuse"}),(0,t.jsx)("option",{value:"ADMIN",children:"Administrateur"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{id:"isActive",type:"checkbox",checked:w.isActive,onChange:e=>y({...w,isActive:e.target.checked}),className:"h-4 w-4 rounded border-gray-300"}),(0,t.jsx)(u._,{htmlFor:"isActive",className:"font-normal",children:"Utilisateur actif"})]})]}),(0,t.jsxs)(c.cN,{children:[(0,t.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Annuler"}),(0,t.jsx)(l.z,{type:"submit",children:N?"Modifier":"Cr\xe9er"})]})]})]})})]})}},9055:function(e,s,r){"use strict";r.d(s,{C:function(){return n}});var t=r(7437);r(2265);var i=r(3027),a=r(9354);let l=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-yellow-100 text-yellow-800"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:r,...i}=e;return(0,t.jsx)("div",{className:(0,a.cn)(l({variant:r}),s),...i})}}},function(e){e.O(0,[100,734,714,40,971,23,744],function(){return e(e.s=653)}),_N_E=e.O()}]);