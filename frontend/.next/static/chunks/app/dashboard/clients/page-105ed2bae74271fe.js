(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{7674:function(e,s,l){Promise.resolve().then(l.bind(l,8241))},8241:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return N}});var i=l(7437),a=l(2265),n=l(1828),t=l(9733),r=l(8185),c=l(7304),d=l(4662),m=l(7209),h=l(402),o=l(2513),x=l(1240),u=l(8422),j=l(2800);function N(){let[e,s]=(0,a.useState)([]),[l,N]=(0,a.useState)(!0),[p,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),[C,w]=(0,a.useState)({firstName:"",lastName:"",phone:"",email:""}),y=()=>{j.Z.get("/clients").then(e=>{s(e.data)}).finally(()=>N(!1))};(0,a.useEffect)(()=>{y()},[]);let b=e=>{e?(v(e),w({firstName:e.firstName,lastName:e.lastName,phone:e.phone,email:e.email||""})):(v(null),w({firstName:"",lastName:"",phone:"",email:""})),f(!0)},S=async e=>{e.preventDefault();try{let e={...C,email:C.email||void 0};g?await j.Z.put("/clients/".concat(g.id),e):await j.Z.post("/clients",e),y(),f(!1)}catch(e){var s,l;alert((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Erreur lors de l'enregistrement")}};return l?(0,i.jsx)(n.Z,{children:(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Chargement..."})}):(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Clients"}),(0,i.jsxs)("p",{className:"text-muted-foreground mt-1",children:[e.length," clients au total"]})]}),(0,i.jsxs)(t.z,{onClick:()=>b(),className:"w-full sm:w-auto",children:[(0,i.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Ajouter un client"]})]}),(0,i.jsx)(r.Zb,{children:(0,i.jsxs)(c.iA,{children:[(0,i.jsx)(c.xD,{children:(0,i.jsxs)(c.SC,{children:[(0,i.jsx)(c.ss,{children:"Nom"}),(0,i.jsx)(c.ss,{children:"Pr\xe9nom"}),(0,i.jsx)(c.ss,{children:"T\xe9l\xe9phone"}),(0,i.jsx)(c.ss,{children:"Email"}),(0,i.jsx)(c.ss,{className:"text-right",children:"Actions"})]})}),(0,i.jsx)(c.RM,{children:0===e.length?(0,i.jsx)(c.SC,{children:(0,i.jsxs)(c.pj,{colSpan:5,className:"text-center py-8",children:[(0,i.jsx)(x.Z,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-2"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Aucun client"})]})}):e.map(e=>(0,i.jsxs)(c.SC,{children:[(0,i.jsx)(c.pj,{className:"font-medium",children:e.lastName}),(0,i.jsx)(c.pj,{children:e.firstName}),(0,i.jsx)(c.pj,{children:e.phone}),(0,i.jsx)(c.pj,{className:"text-muted-foreground",children:e.email||"-"}),(0,i.jsx)(c.pj,{className:"text-right",children:(0,i.jsx)(t.z,{variant:"ghost",size:"sm",onClick:()=>b(e),children:(0,i.jsx)(u.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]}),(0,i.jsx)(d.Vq,{open:p,onOpenChange:f,children:(0,i.jsxs)(d.cZ,{className:"sm:max-w-[500px]",children:[(0,i.jsxs)(d.fK,{children:[(0,i.jsx)(d.$N,{children:g?"Modifier le client":"Nouveau client"}),(0,i.jsx)(d.Be,{children:g?"Modifiez les informations du client":"Ajoutez un nouveau client"})]}),(0,i.jsxs)("form",{onSubmit:S,children:[(0,i.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(h._,{htmlFor:"firstName",children:"Pr\xe9nom"}),(0,i.jsx)(m.I,{id:"firstName",value:C.firstName,onChange:e=>w({...C,firstName:e.target.value}),required:!0})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(h._,{htmlFor:"lastName",children:"Nom"}),(0,i.jsx)(m.I,{id:"lastName",value:C.lastName,onChange:e=>w({...C,lastName:e.target.value}),required:!0})]})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(h._,{htmlFor:"phone",children:"T\xe9l\xe9phone"}),(0,i.jsx)(m.I,{id:"phone",type:"tel",value:C.phone,onChange:e=>w({...C,phone:e.target.value}),required:!0})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(h._,{htmlFor:"email",children:"Email (optionnel)"}),(0,i.jsx)(m.I,{id:"email",type:"email",value:C.email,onChange:e=>w({...C,email:e.target.value})})]})]}),(0,i.jsxs)(d.cN,{children:[(0,i.jsx)(t.z,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Annuler"}),(0,i.jsx)(t.z,{type:"submit",children:g?"Modifier":"Cr\xe9er"})]})]})]})})]})}}},function(e){e.O(0,[100,734,714,40,971,23,744],function(){return e(e.s=7674)}),_N_E=e.O()}]);